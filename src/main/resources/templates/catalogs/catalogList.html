<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>
        To Do List
    </title>
    <link rel="stylesheet" href="styles/kendo.common.min.css"/>
    <link rel="stylesheet" href="styles/kendo.default-v2.min.css"/>
    <link rel="stylesheet" href="styles/kendo.default.mobile.min.css"/>
    <script src="js/jquery.min.js"></script>
    <script src="js/kendo.all.min.js"></script>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link th:href="@{/css/style.css}" rel="stylesheet"/>
    <!--    <script src="/js/jquery-3.5.1.min.js"></script>-->
</head>

<body>
<div class="container">
    <h1><a href="/" style="text-decoration: none">To Do List</a></h1>

    <div class="text-right">
        <form name="form1" action="/" method="POST">
            <div id="Panel"></div>
        </form>
        <div id="grid"></div>
        <script>
            var dataSource = new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "/read",
                        type: "GET",
                        dataType: "json",
                        contentType: "application/json"
                    },
                    update: {
                        url: "/update",
                        type: "POST",
                        dataType: "json",
                        contentType: "application/json"
                    },
                    destroy: {
                        url: "/delete",
                        type: "DELETE",
                        dataType: "json",
                        contentType: "application/json"
                    },
                    create: {
                        url: "/create",
                        type: "POST",
                        dataType: "json",
                        contentType: "application/json"
                    },
                    parameterMap: function (options, operation) {
                        if (operation !== "read" && options.models) {
                            console.log(JSON.stringify(options));
                            return JSON.stringify(options);
                        }
                    }
                },
                batch: true,
                pageSize: 10,
                schema: {
                    model: {
                        id: "id",
                        fields: {
                            title: {validation: {required: true}},
                            content: {validation: {required: true}},
                            this_date: {validation: {required: true}}
                        }
                    }
                },
            });
            $("#grid").kendoGrid({
                dataSource: dataSource,
                pageable: true,
                sortable: true,
                toolbar: [
                    {
                        name: "create",
                        text: "추가"
                    }],
                columns: [
                    {
                        field: "title",
                        title: "제목"
                    },
                    {
                        field: "content",
                        title: "내용"
                    },
                    {
                        field: "this_date",
                        title: "날짜",
                        // format: "{0:dd-MM-yyyy}"
                    },
                    {
                        command: [
                            {
                                name: "edit",
                                text: {
                                    edit: "수정",
                                    update: "완료",
                                    cancel: "취소"
                                }
                            },
                            {
                                name: "destroy",
                                text: "삭제"
                            }
                        ],
                        title: "&nbsp;"
                    }],
                editable: {
                    mode: "inline",
                    confirmation: function (e) {
                        return e.title + "을(를) 삭제하시겠습니까?"
                    }
                },
                save: function () {
                    this.refresh();
                }
            });
        </script>
    </div>
</div>
</body>
</html>